<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Image editing tool built with OpenGL and the pnglib library"><title>ImageEditor</title>
<link rel=canonical href=https://cmanziel.github.io/p/imageeditor/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="ImageEditor"><meta property='og:description' content="Image editing tool built with OpenGL and the pnglib library"><meta property='og:url' content='https://cmanziel.github.io/p/imageeditor/'><meta property='og:site_name' content='Claudio Mandelli'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='OpenGL'><meta property='og:image' content='https://cmanziel.github.io/p/imageeditor/collage.png'><meta name=twitter:title content="ImageEditor"><meta name=twitter:description content="Image editing tool built with OpenGL and the pnglib library"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://cmanziel.github.io/p/imageeditor/collage.png'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_quad_hu9968688739216331654.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Claudio Mandelli</a></h1><h2 class=site-description></h2></div></header><ol class=menu-social><li><a href=mailto:claudio.mandelli01@gmail.com target=_blank title=E-mail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://github.com/cmanziel target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-user"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About Me</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#window>Window</a></li><li><a href=#image-decompression>Image Decompression</a></li><li><a href=#brush>Brush</a></li><li><a href=#pointbuffer>PointBuffer</a></li><li><a href=#image-generation>Image Generation</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/imageeditor/><img src=/p/imageeditor/collage_hu7029234297378234768.png srcset="/p/imageeditor/collage_hu7029234297378234768.png 800w, /p/imageeditor/collage_hu13033585365719712761.png 1600w" width=800 height=800 loading=lazy alt="Featured image of post ImageEditor"></a></div><div class=article-details><header class=article-category><a href=/categories/image-processing/>Image Processing</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/imageeditor/>ImageEditor</a></h2><h3 class=article-subtitle>Image editing tool built with OpenGL and the pnglib library</h3></div></div></header><section class=article-content><p>This project combines two other ones i made before.
One is about drawing on a window using the mouse cursor as a brush, the other is the pnglib library to convert into an image what&rsquo;s been drawn on the window. <a class=link href=https://github.com/cmanziel/ImageEditor target=_blank rel=noopener>Source code</a>.</p><h2 id=window>Window</h2><p>The window is conceptually divided into a grid of pixels, whose data is stored in a bi-dimensional array of <em>point</em> structures.
The image pixels are mapped 1:1 to the window pixels.
The window creation is done through GLFW.</p><h2 id=image-decompression>Image Decompression</h2><p>To edit the image it has to be firstly displayed onto the window.
To do so the image has to be decompressed to get the raw pixel data containing the rgb values for each pixel.
The decompression is handled by the <em>pnglib</em> library: its <em>decompress</em> function receives the image file and returns its pixel data.
If no image is provided or the file is corrupted a default white color is applied to every pixel</p><h2 id=brush>Brush</h2><p>A brush is constructed around the mouse cursor as a circular grid.
The center of the grid is the pixel the cursor is currently pointing.
Its dimensions can vary on mouse input or based on the cursor&rsquo;s speed as selected by the user.
Handled by the Brush class.</p><p><img src=/p/imageeditor/drawing_site.jpg width=400 height=200 srcset="/p/imageeditor/drawing_site_hu10146579996135543304.jpg 480w, /p/imageeditor/drawing_site_hu3170732616649402332.jpg 1024w" loading=lazy alt="Drawing before the brush implementation: the cursor colors only the pixel at its position." class=gallery-image data-flex-grow=200 data-flex-basis=480px></p><p><img src=/p/imageeditor/drawing_0_site.jpg width=2000 height=1000 srcset="/p/imageeditor/drawing_0_site_hu115328198846691255.jpg 480w, /p/imageeditor/drawing_0_site_hu17636706954641804793.jpg 1024w" loading=lazy alt="Brush implemented as a square grid. Its dimension is modified through key input." class=gallery-image data-flex-grow=200 data-flex-basis=480px></p><h2 id=pointbuffer>PointBuffer</h2><p>This is the class that actually handles the window&rsquo;s grid allocation in memory and modifies its values.
The functions <em>InsertPoint</em> and <em>RemovePoint</em> use the brush&rsquo;s position and dimension to draw the correct points on the image.</p><h2 id=image-generation>Image Generation</h2><p>The initial image&rsquo;s pixel data is overwritten by what&rsquo;s drawn onto it.
The window&rsquo;s bi-dimensional grid array serves as the raw pixel data input for the <em>compress</em> function of the <em>pnglib</em> library.
A PNG file is written from scratch by the library inserting the compressed pixel data into it.</p><p><img src=/p/imageeditor/collage.png width=1920 height=1920 srcset="/p/imageeditor/collage_hu1759512000934668714.png 480w, /p/imageeditor/collage_hu3895675240254944732.png 1024w" loading=lazy alt="Drawing on images previously generated by this application. Brush implemented as a circular grid." class=gallery-image data-flex-grow=100 data-flex-basis=240px></p></section><footer class=article-footer><section class=article-tags><a href=/tags/opengl/>OpenGL</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/csimage/><div class=article-image><img src=/p/csimage/effects.6e123d96389052e15800e36534672a4c_hu5902609263498064036.png width=250 height=150 loading=lazy alt="Featured image of post CSImage" data-hash="md5-bhI9ljiQUuFYAONlNGcqTA=="></div><div class=article-details><h2 class=article-title>CSImage</h2></div></a></article><article class=has-image><a href=/p/pnglib/><div class=article-image><img src=/p/pnglib/cover.6514b4a3fc21eecb865b5e3b531c90cf_hu10023658628366470928.jpg width=250 height=150 loading=lazy alt="Featured image of post pnglib" data-hash="md5-ZRS0o/wh7suGW147UxyQzw=="></div><div class=article-details><h2 class=article-title>pnglib</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Claudio Mandelli</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>